{% extends 'base.html.twig' %}




{% block title %}Liste des véhicules{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/vehicules-list.css') }}">
{% endblock %}

{% block body %}
    <div class="container mt-4">
        <h1 class="mb-4">Recherche de véhicules</h1>

        {#  FORMULAIRE AVEC TOUS LES CHAMPS #}
        {{ form_start(form) }}
        <div class="row">
            <div class="col-md-6">
                {{ form_row(form.recherche) }}
            </div>
            <div class="col-md-6">
                {{ form_row(form.marque) }}
            </div>
            <div class="col-md-6">
                {{ form_row(form.prixMin) }}
            </div>
            <div class="col-md-6">
                {{ form_row(form.prixMax) }}
            </div>
        </div>
        {{ form_end(form) }}

        {# MES CARDS STYLÉES #}
        <hr style="margin: 30px 0;">
        <div id="resultats">
            {% if vehicules|length > 0 %}
                <div class="row">
                    <div class="col-12">
                        <h2 class="mb-4">Véhicules trouvés ({{ vehicules|length }}) :</h2>
                    </div>
                </div>
                
                <div class="row g-4">
                   {% for vehicule in vehicules %}
    <div class="col-lg-4 col-md-6 col-sm-12">
        <div class="card h-100 shadow-sm border-0 vehicle-card">
            <div class="card-body p-4">
                
                {#  IMAGE PETITE À CÔTÉ DU TITRE de la card #}
                <div class="d-flex align-items-center mb-3 vehicle-card">
    {% if vehicule.imagePrincipale %}
        <div class="card-img-container">
            <img src="{{ asset('images/' ~ vehicule.imagePrincipale) }}" 
                 class="me-3 rounded vehicle-card-image" 
                 alt="{{ vehicule.nom }}"
                 style="width: 85px; height: 60px; object-fit: cover;">
        </div>
                    {% else %}
                        <div class="me-3 bg-light rounded d-flex align-items-center justify-content-center" 
                             style="width: 85px; height: 60px;">
                            <i class="fas fa-car text-muted"></i>
                        </div>
                    {% endif %}
                    
                    <h5 class="card-title text-primary mb-0">
                        {{ vehicule.nom }}
                    </h5>
                </div>

                <div class="vehicle-details mb-3">
                    <div class="detail-item mb-2">
                        <strong>Prix :</strong>
                        <span class="text-success fs-5 fw-bold">{{ vehicule.tarifJournalier }}€/jour</span>
                    </div>

                    <div class="detail-item mb-2">
                        <strong>Marque :</strong>
                        <span class="text-muted">{{ vehicule.marque ?? 'Non renseigné' }}</span>
                    </div>
                </div>

                <div class="d-grid mt-auto">
                    <a href="{{ path('app_vehicule_show', {'id': vehicule.id}) }}" 
                       class="btn btn-primary btn-sm">
                        <i class="fas fa-eye me-1"></i>Voir détails
                    </a>
                </div>
            </div>
        </div>
    </div>
{% endfor %}
                </div>
            {% else %}
                <div class="row justify-content-center">
                    <div class="col-md-8">
                        <div class="alert alert-info border-0 shadow-sm text-center">
                            <div class="mb-3">
                                <i class="fas fa-search fa-3x text-muted"></i>
                            </div>
                            <h4 class="alert-heading">Aucun résultat trouvé</h4>
                            <p class="mb-0">Aucun véhicule ne correspond à vos critères de recherche.</p>
                            <small class="text-muted">Essayez de modifier vos filtres.</small>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>

    
{% endblock %}